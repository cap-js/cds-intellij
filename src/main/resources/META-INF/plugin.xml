<idea-plugin>
    <id>com.sap.cap.cds</id>
    <name>SAP CDS Language Support</name>
    <vendor url="https://sap.com/">SAP SE</vendor>
    <description><![CDATA[ Provides support for the <a href="https://cap.cloud.sap/docs/cds/">CDS language</a> in IntelliJ IDEs. Use these powerful features:
<ul>
    <li>Syntax highlighting</li>
    <li>Code completion</li>
    <li>Goto definition</li>
    <li>Hover documentation</li>
    <li>Document formatting</li>
    <li>Diagnostics</li>
    <li>Quick fixes</li>
</ul>
The set of features will grow with future releases, aligned with the development of the JetBrains IntelliJ LSP API.]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.ultimate</depends>
    <depends>org.jetbrains.plugins.textmate</depends>
    <depends>NodeJS</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileType
                name="cds"
                implementationClass="com.sap.cap.cds.intellij.CdsFileType"
                fieldName="INSTANCE"
                language="cds"
                extensions="cds"/>

        <lang.substitutor language="cds" order="first"
                          implementationClass="com.sap.cap.cds.intellij.lang.CdsLanguageSubstitutor"/>

        <langCodeStyleSettingsProvider
                implementation="com.sap.cap.cds.intellij.codestyle.CdsCodeStyleSettingsProvider"/>

        <formattingService implementation="com.sap.cap.cds.intellij.codestyle.CdsCodeStylePreviewFormattingService"/>

        <platform.lsp.serverSupportProvider implementation="com.sap.cap.cds.intellij.lsp.CdsLspServerSupportProvider"/>

        <notificationGroup id="com.sap.cap.cds.intellij.notifications"
                           displayType="BALLOON"/>

        <vfs.asyncListener implementation="com.sap.cap.cds.intellij.codestyle.CdsPrettierJsonListener"/>
        <postStartupActivity implementation="com.sap.cap.cds.intellij.lifecycle.ProjectLifecycleListener"/>
    </extensions>

    <applicationListeners>
        <listener
                topic="com.intellij.ide.AppLifecycleListener"
                class="com.sap.cap.cds.intellij.lifecycle.IdeLifecycleListener"
                activeInHeadlessMode="true" activeInTestMode="true"
        />
        <listener
                topic="com.intellij.ide.plugins.DynamicPluginListener"
                class="com.sap.cap.cds.intellij.lifecycle.PluginLifecycleListener"
                activeInHeadlessMode="true" activeInTestMode="true"
        />
    </applicationListeners>

    <change-notes><![CDATA[ <h3>Changed</h3>
<ul>
    <li>Include @sap/cds-lsp 9.1.0 with the following changes since 8.9.1:
        <ul>
            <li>Support Node.js 24
            <li>Performance/Responsiveness:
                <ul>
                    <li>Reduce "lagging red underline" while typing - configurable via user setting `cds.workspace.fastDiagnosticsMode`
                    <li>Outdated compilations in background are aborted fast. This increases responsiveness and reduces CPU usage and is especially useful for large projects with many files.
                </ul>
            </li>
            <li>Hovering over errors shown explanation for many error types
            <li>Hovering over built-in types shows documentation
            <li>Formatter: New option `boolOpsAtLineEnd` to position `and`, `or` operators at line end
            <li>Formatter: New option `argsInNewLine` to put multiple arguments to e.g. function calls on a new line
            <li>Formatter: Chained method-like function calls are now broken into separate lines
            <li>Formatter: More compact formatting of `case` statements
            <li>Formatter fixes:
                <ul>
                    <li>Original empty lines are now correctly preserved before single-lined blocks
                    <li>Separate alignment of annotations before resp. within projection-like entities
                    <li>Separate alignment of annotations to entity and select items
                    <li>Highlighting of parenthesized annotations with strings containing a colon
                    <li>Highlighting of comments in queries
                </ul>
            </li>
        </ul>
    </li>
</ul> ]]></change-notes>
</idea-plugin>
